<h1 class="text-center mb-4">Orders</h1>

<table class="table table-bordered table-striped">
  <thead class="table-dark">
    <tr>
      <th>#</th>
      <th>User</th>
      <th>Date</th>
      <th>Total</th>
      <th>Items</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @orders.each_with_index do |order, index| %>
      <tr>
        <td><%= index + 1 %></td>
        <td><%= order.user&.email || "N/A" %></td>
        <td><%= order.created_at.strftime("%Y-%m-%d %H:%M") %></td>
        <td><%= number_to_currency(order.total_price, unit: "MMK") %></td>
        <td>
          <ul class="list-unstyled">
            <% order.order_items.each do |item| %>
              <% variant = item.product.product_variants.first %> <!-- adjust logic if variants differ -->
              <li>
                <strong><%= item.product.name %></strong> -
                <%= variant.color %> / <%= variant.size %> -
                <%= item.quantity %> pcs Ã—
                <%= number_to_currency(item.product.price, unit: "MMK") %>
              </li>
            <% end %>
          </ul>
        </td>
        <td>
          <%= link_to "Details", admin_order_path(order), class: "btn btn-sm btn-primary" %>
          <%= link_to "Delete", admin_order_path(order), method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-sm btn-danger" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
