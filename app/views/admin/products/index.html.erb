<h1 class="text-center mb-4">Product List</h1>

<div class="mb-3 ">
  <%= link_to 'New Product', new_admin_product_path, class: 'btn btn-success' %>
</div>

<table class="table table-bordered table-striped">
  <thead class="table-dark">
    <tr>
      <th>#</th>
      <th>Image</th>
      <th>Product Name</th>
      <th>Description</th>
      <th>Price</th>
      <th>Stock</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @products.each_with_index do |product, index| %>
      <tr>
        <td><%= index + 1 %></td>
        <td class="text-center">
          <% if product.image.attached? %>
             <%= link_to url_for(product.image), target: "_blank" do %>
                <%= image_tag product.image.variant(resize_to_limit: [50, 50]) %>
              <% end %>
          <% else %>
            No image available
          <% end %>
        </td>
        <td><%= product.name %></td>
        <td><%= product.description %></td>
        <td><%= number_to_currency(product.price, unit: "MMK") %></td>
        <td><%= product.stock %></td>
        <td>
        <div class="btn-group btn-group-sm" role="group" aria-label="Product actions">
            <%= link_to admin_product_path(product), 
                        class: "btn btn-light text-primary", 
                        title: "View Details", 
                        data: { bs_toggle: "tooltip" },
                        aria: { label: "View product details" } do %>
              <i class="fas fa-eye"></i>
              <span class="visually-hidden">View</span>
            <% end %>

            <%= link_to edit_admin_product_path(product), 
                        class: "btn btn-light text-success", 
                        title: "Edit Product", 
                        data: { bs_toggle: "tooltip" },
                        aria: { label: "Edit product" } do %>
              <i class="fas fa-edit"></i>
              <span class="visually-hidden">Edit</span>
            <% end %>

         <%= button_to admin_product_path(product),
              method: :delete,
              form: {
                class: "d-inline",  # Makes it appear like a link
                data: {
                  turbo_confirm: "Are you sure you want to delete this product?",
                  bs_toggle: "tooltip"
                }
              },
              class: "btn btn-light text-danger p-0 border-0 bg-transparent",
              title: "Delete Product" do %>
          <i class="fas fa-trash-alt"></i>
        <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
